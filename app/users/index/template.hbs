<h1>Users</h1>

<form {{action 'applyFilters' on='submit'}}>
  <div class="grid grid--12of12 grid-sm--6of12 grid-lg--4of12 grid-xl--2of12">
    <div class="grid-cell form-group">
      {{input
        type        = 'search'
        class       = 'form-control'
        placeholder = 'Search...'
        value       = _search
      }}
    </div>
    <div class="grid-cell form-group">
      {{#user-selection
        user      = _supervisor
        on-change = (action (mut _supervisor))
      as |u|}}
        {{u.user placeholder='Select supervisor...'}}
      {{/user-selection}}
    </div>
    <div class="grid-cell form-group">
      {{#sy-checkbox checked=_inactive on-change=(action (mut _inactive))}}
        Show inactive users
      {{/sy-checkbox}}
    </div>
  </div>
  <button type="submit" class="btn btn-primary">Apply</button>
  <button type="button" class="btn" {{action 'resetFilters'}}>Reset</button>
</form>

{{#paginated-table class='table--hover' as |t|}}
  {{#t.head}}
    <tr>
      <th>Name</th>
      <th>Percentage</th>
      <th>Worktime per day</th>
      <th>Worktime balance</th>
    </tr>
  {{/t.head}}
  {{#t.body}}
    {{#each model as |user|}}
      {{#link-to 'users.edit' user.id data-test-user-row tagName='tr' class='pointer'}}
        <td class={{unless user.isActive 'color-danger'}}>{{user.fullName}}</td>
        {{#if user.activeEmployment}}
          <td>{{user.activeEmployment.percentage}}%</td>
          <td>{{format-duration user.activeEmployment.worktimePerDay false}}</td>
        {{else}}
          <td class={{unless user.isActive 'color-danger'}} colspan="2"><em>User has no active employment</em></td>
        {{/if}}
        <td>
          <span class="worktime-balance {{balance-highlight-class user.worktimeBalance}}">
            {{format-duration user.worktimeBalance false}}
          </span>
        </td>
      {{/link-to}}
    {{^}}
      <tr><td colspan="4" class="text-center"><em>No users found</em></td></tr>
    {{/each}}
  {{/t.body}}
  {{t.foot
    pages     = model.meta.pagination.pages
    page      = page
    page_size = page_size
  }}
{{/paginated-table}}